codeInput.plugins.GoToLine=class extends codeInput.Plugin{useCtrlG=!1;constructor(e=!0){super([]),this.useCtrlG=e}afterElementsAdded(e){let t=e.textareaElement;this.useCtrlG&&t.addEventListener("keydown",t=>{this.checkCtrlG(e,t)})}checkPrompt(e,t){let i=e.textarea.value.split("\n"),n=i.length,l=Number(e.input.value.split(":")[0]),a=0,o=1,r=e.input.value.split(":");if(r.length>2)return e.input.classList.add("code-input_go-to-line_error");if("Escape"==t.key)return this.cancelPrompt(e,t);if(e.input.value){if(!/^[0-9:]*$/.test(e.input.value)||l<1||l>n||(r.length>=2&&(a=Number(r[1]),o=i[l-1].length),a<0||a>o))return e.input.classList.add("code-input_go-to-line_error");e.input.classList.remove("code-input_go-to-line_error")}"Enter"==t.key&&(this.goTo(e.textarea,l,a),this.cancelPrompt(e,t))}cancelPrompt(e,t){t.preventDefault(),e.codeInput.handleEventsFromTextarea=!1,e.textarea.focus(),e.codeInput.handleEventsFromTextarea=!0,e.setAttribute("inert",!0),e.setAttribute("tabindex",-1),e.setAttribute("aria-hidden",!0),e.classList.add("code-input_go-to-line_hidden-dialog"),e.input.value=""}showPrompt(e){if(void 0==e.pluginData.goToLine||void 0==e.pluginData.goToLine.dialog){let t=e.textareaElement,i=document.createElement("div"),n=document.createElement("input"),l=document.createElement("span");l.setAttribute("tabindex",0),l.setAttribute("title","Close Dialog and Return to Editor"),l.innerHTML='<i class="bi bi-x-lg m-2"></i>',i.appendChild(n),i.appendChild(l),i.className="code-input_go-to-line_dialog ps-4 pe-2 py-1 d-flex align-items-center mt-3 me-3 rounded",n.spellcheck=!1,n.placeholder="Line",i.codeInput=e,i.textarea=t,i.input=n,n.addEventListener("keypress",e=>{"Enter"==e.key&&e.preventDefault()}),n.addEventListener("keyup",e=>this.checkPrompt(i,e)),l.addEventListener("click",e=>{this.cancelPrompt(i,e)}),l.addEventListener("keypress",e=>{("Space"==e.key||"Enter"==e.key)&&this.cancelPrompt(i,e)}),e.dialogContainerElement.appendChild(i),e.pluginData.goToLine={dialog:i},n.focus()}else e.pluginData.goToLine.dialog.classList.remove("code-input_go-to-line_hidden-dialog"),e.pluginData.goToLine.dialog.removeAttribute("inert"),e.pluginData.goToLine.dialog.setAttribute("tabindex",0),e.pluginData.goToLine.dialog.removeAttribute("aria-hidden"),e.pluginData.goToLine.dialog.input.focus()}goTo(e,t,i=0){let n,l,a,o,r=-1,s=e.value.split("\n");if(t>0&&t<=s.length){if(e.computedStyleMap?l=(n=e.computedStyleMap().get("font-size").value)*e.computedStyleMap().get("line-height").value:(n=document.defaultView.getComputedStyle(e,null).getPropertyValue("font-size").split("px")[0],l=document.defaultView.getComputedStyle(e,null).getPropertyValue("line-height").split("px")[0]),a=(t>3?t-3:1)*l,o=(l-n)/2,t>1&&(r=s.slice(0,t-1).join("\n").length),0==i)do r++;while("\n"!=e.value[r]&&/\s/.test(e.value[r]));else r+=1+i-1;e.scrollTop=a-o,e.setSelectionRange(r,r),e.click()}}checkCtrlG(e,t){t.ctrlKey&&"g"==t.key&&(t.preventDefault(),this.showPrompt(e))}};